<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Painel de Controle</title>
    <!-- O link para o CSS está correto, buscando na raiz -->
    <link rel="stylesheet" href="admin.css">
</head>
<body>
    <!-- Container de Login -->
    <div id="login-container">
        <h1>Acesso Restrito</h1>
        <p>Por favor, insira a senha de administrador para continuar.</p>
        <!-- ID CORRIGIDO: de 'password' para 'password-input' -->
        <input type="password" id="password-input" placeholder="Senha">
        <!-- ID CORRIGIDO e onclick REMOVIDO -->
        <button id="login-btn">Entrar</button>
    </div>

    <!-- Painel de Admin (inicialmente escondido) -->
    <div id="admin-panel" class="hidden">
        <header>
            <h1>Painel de Controle do Administrador</h1>
            <!-- ID CORRIGIDO e onclick REMOVIDO -->
            <button id="logout-btn">Sair</button>
        </header>

        <main>
            <section id="metrics">
                <h2>Métricas de Uso</h2>
                <div class="cards-container">
                    <div class="card">
                        <h3>Total de Conversas</h3>
                        <!-- ID CORRIGIDO -->
                        <p id="total-conversas">...</p>
                    </div>
                    <div class="card">
                        <h3>Últimas 5 Conversas</h3>
                        <!-- ID CORRIGIDO -->
                        <ul id="ultimas-conversas">
                            <li>Carregando...</li>
                        </ul>
                    </div>

                    <!-- Módulo "Profundidade de Engajamento" -->
                    <div class="card">
                        <h3>Profundidade de Engajamento</h3>
                        <p>Duração Média da Conversa: <span id="average-message-count">...</span> mensagens</p>
                        <p>Conversas Curtas (<= 3 mensagens): <span id="short-conversations">...</span></p>
                        <p>Conversas Longas (> 3 mensagens): <span id="long-conversations">...</span></p>
                    </div>

                    <!-- Módulo "Lealdade do Usuário" -->
                    <div class="card">
                        <h3>Top 5 Agentes Mais Ativos</h3>
                        <ul id="top-users-list">
                            <li>Carregando...</li>
                        </ul>
                    </div>

                    <!-- Módulo "Análise de Falhas" -->
                    <div class="card">
                        <h3>Análise de Falhas</h3>
                        <p>Respostas Inconclusivas do Bot: <span id="inconclusive-responses-count">...</span></p>
                        <h4>Conversas com Falhas:</h4>
                        <ul id="failed-conversations-list">
                            <li>Carregando...</li>
                        </ul>
                    </div>
                </div>
            </section>

            <section id="ai-control">
                <h2>Controle da IA - Personalidade Global</h2>
                <p>Esta instrução define o comportamento do bot para TODAS as novas conversas.</p>
                <!-- ID CORRIGIDO -->
                <textarea id="system-instruction-input" rows="10" placeholder="Carregando instrução atual..."></textarea>
                <!-- ID CORRIGIDO e onclick REMOVIDO -->
                <button id="save-instruction-btn">Salvar Nova Instrução</button>
                <!-- ID CORRIGIDO -->
                <p id="save-status"></p>
            </section>
        </main>
    </div>

    <!-- O script é carregado no final, o que é uma boa prática -->
    <script src="admin.js"></script>
</body>
</html>
